<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mohammad Mozafari | Multimedia Artist</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* --- RESET & BASIC SETUP --- */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
      background: #050505;
      color: #eaeaea;
      font-family: 'Inter', sans-serif;
      overflow: hidden;
      cursor: crosshair; /* نشانگر موس باحال */
    }

    /* --- 1. VIDEO BACKGROUND --- */
    .video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -10;
      overflow: hidden;
    }

    .video-background video {
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      object-fit: cover;
      opacity: 0.4; /* ویدیو کمی تاریک‌تر */
      transition: filter 0.8s ease, opacity 0.8s ease;
    }

    /* بلور شدن ویدیو در صفحات داخلی */
    body.blur-mode .video-background video {
      filter: blur(12px) grayscale(100%);
      opacity: 0.15;
    }

    /* --- 2. DOT CANVAS (Interactive Layer) --- */
    #dotCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* روی ویدیو */
      pointer-events: none;
    }

    /* --- 3. NAVIGATION --- */
    .main-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      padding: 25px;
      display: flex;
      justify-content: center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
    }

    .nav-links {
      display: flex;
      gap: 40px;
    }

    .nav-item {
      color: rgba(255, 255, 255, 0.5);
      font-family: 'Syncopate', sans-serif;
      font-size: 11px;
      letter-spacing: 2px;
      cursor: pointer;
      text-transform: uppercase;
      transition: 0.3s;
      position: relative;
    }

    .nav-item::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      width: 0;
      height: 1px;
      background: #fff;
      transition: 0.3s;
      transform: translateX(-50%);
    }

    .nav-item:hover, .nav-item.active {
      color: #fff;
      text-shadow: 0 0 10px rgba(255,255,255,0.8);
    }
    
    .nav-item.active::after {
      width: 100%;
    }

    /* --- 4. MAIN CONTENT --- */
    #main-container {
      position: relative;
      width: 100%;
      height: 100%;
      z-index: 10;
      padding-top: 80px;
    }

    .panel {
      display: none;
      width: 100%;
      height: 100%;
      justify-content: center;
      align-items: center;
    }

    .panel.active {
      display: flex;
      animation: fadeUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* --- HERO TEXT (SPOTLIGHT EFFECT) --- */
    .hero-content {
      text-align: center;
      mix-blend-mode: screen; 
      position: relative;
    }

    /* افکت چراغ قوه روی متن */
    h1.spotlight-text {
      font-family: 'Syncopate', sans-serif;
      font-size: clamp(40px, 9vw, 120px);
      font-weight: 700;
      letter-spacing: 5px;
      margin: 0;
      
      /* تنظیمات پیش‌فرض متن (تاریک و محو) */
      color: rgba(255, 255, 255, 0.15); 
      background-image: radial-gradient(
        circle 250px at var(--x, 50%) var(--y, 50%), 
        #ffffff 0%, 
        transparent 100%
      );
      background-size: 100% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent; /* مهم: متن شفاف میشه تا گرادینت دیده بشه */
      
      /* اگه موس بیرون بود حداقل یه چیزی دیده بشه */
      text-shadow: 0 0 20px rgba(0,0,0,0.5); 
      
      transition: opacity 0.2s;
      cursor: default;
    }

    /* لایه دوم برای اینکه استروک (خط دور) همیشه معلوم باشه */
    h1.spotlight-text::before {
      content: 'MOHOMOZO';
      position: absolute;
      inset: 0;
      z-index: -1;
      -webkit-text-stroke: 1px rgba(255, 255, 255, 0.15);
      -webkit-text-fill-color: transparent;
      pointer-events: none;
    }

    .hero-subtitle {
      font-family: 'Syncopate', sans-serif;
      font-size: clamp(10px, 2vw, 14px);
      letter-spacing: 8px;
      margin-top: 20px;
      text-transform: uppercase;
      opacity: 0.7;
      color: #fff;
    }

    /* --- GLASS BOX --- */
    .glass-box {
      width: 85%;
      max-width: 1000px;
      height: 80%;
      background: rgba(10, 10, 10, 0.5);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 40px;
      overflow-y: auto;
      box-shadow: 0 30px 60px rgba(0,0,0,0.5);
    }
    
    .glass-box::-webkit-scrollbar { width: 6px; }
    .glass-box::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }

    .content-section {
      margin-bottom: 50px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 30px;
    }
    
    .content-section h2 {
      font-family: 'Syncopate', sans-serif;
      color: #fff;
      margin-bottom: 25px;
      font-size: 20px;
      display: inline-block;
      border-bottom: 2px solid #fff;
      padding-bottom: 5px;
    }

    .content-section p {
      line-height: 1.9;
      font-size: 15px;
      color: rgba(255,255,255,0.8);
      max-width: 800px;
    }

    /* --- GRID --- */
    .filter-menu {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .filter-btn {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #888;
      padding: 10px 20px;
      cursor: pointer;
      font-family: 'Syncopate', sans-serif;
      font-size: 10px;
      transition: 0.3s;
      border-radius: 30px;
    }

    .filter-btn.active, .filter-btn:hover {
      background: #fff;
      color: #000;
      border-color: #fff;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 25px;
    }

    .grid-item {
      aspect-ratio: 4/5;
      background: #111;
      position: relative;
      cursor: pointer;
      overflow: hidden;
      border-radius: 8px;
    }

    .grid-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.7s cubic-bezier(0.2, 1, 0.3, 1), filter 0.5s;
      filter: grayscale(100%);
    }

    .grid-item:hover img {
      transform: scale(1.08);
      filter: grayscale(0%);
    }

    .item-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 20px;
      background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
      opacity: 0;
      transform: translateY(10px);
      transition: 0.4s;
    }

    .grid-item:hover .item-overlay { opacity: 1; transform: translateY(0); }

    /* --- LIGHTBOX --- */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.95);
      z-index: 200;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      backdrop-filter: blur(10px);
    }
    
    .lightbox.active { display: flex; animation: fadeIn 0.3s ease; }

    .lightbox img {
      max-width: 85%;
      max-height: 75vh;
      box-shadow: 0 0 50px rgba(0,0,0,0.5);
      border-radius: 4px;
    }

    .close-lightbox {
      position: absolute;
      top: 30px;
      right: 40px;
      font-size: 40px;
      color: #fff;
      cursor: pointer;
      opacity: 0.6;
      transition: 0.3s;
    }
    .close-lightbox:hover { opacity: 1; transform: rotate(90deg); }

  </style>
</head>
<body>

  <div class="video-background">
    <video id="heroVideo" autoplay muted loop playsinline>
      <source src="assets/loop.mp4" type="video/mp4">
    </video>
  </div>

  <canvas id="dotCanvas"></canvas>

  <nav class="main-nav">
    <div class="nav-links">
      <a class="nav-item active" onclick="showPanel('home')">Home</a>
      <a class="nav-item" onclick="showPanel('about')">About</a>
      <a class="nav-item" onclick="showPanel('portfolio')">Portfolio</a>
      <a class="nav-item" onclick="showPanel('wip')">W.I.P</a>
    </div>
  </nav>

  <main id="main-container">
    
    <section id="home" class="panel active">
      <div class="hero-content">
        <h1 class="spotlight-text" id="heroTitle">MOHOMOZO</h1>
        <p class="hero-subtitle">Mohammad Mozafari</p>
        <p style="font-size: 10px; margin-top:5px; opacity:0.5; letter-spacing: 3px;">Experimental Multimedia Artist</p>
      </div>
    </section>

    <section id="about" class="panel">
      <div class="glass-box">
        <div class="content-section">
          <h2>Artist Bio</h2>
          <p>Mohammad Mozafari is an experimental multimedia artist whose practice spans animation, painting, illustration, theater-based video production and conceptual video art. His work explores emotional states, subconscious narratives, and the tension between personal identity and collective experience.</p>
        </div>
        <div class="content-section">
          <h2>Artist Statement</h2>
          <p>My work operates at the intersection of emotion, memory, and experimental form. I move freely between mediums because each material reveals a different layer of meaning. I build hybrid visual languages that invite viewers to feel ideas before fully understanding them.</p>
        </div>
      </div>
    </section>

    <section id="portfolio" class="panel">
      <div class="glass-box">
        <div class="filter-menu">
          <button class="filter-btn active" onclick="filterItems('all', this)">All Projects</button>
          <button class="filter-btn" onclick="filterItems('painting', this)">Painting</button>
          <button class="filter-btn" onclick="filterItems('animation', this)">Animation</button>
          <button class="filter-btn" onclick="filterItems('illustration', this)">Illustration</button>
        </div>
        <div class="grid-container" id="portfolioGrid"></div>
      </div>
    </section>

    <section id="wip" class="panel">
      <div class="glass-box">
        <h2 style="font-family:'Syncopate'; color:#fff; border-bottom:1px solid #333; padding-bottom:10px">Works In Progress</h2>
        <br>
        <div class="grid-container" id="wipGrid"></div>
      </div>
    </section>

  </main>

  <div id="lightbox" class="lightbox">
    <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
    <img id="lb-img" src="" alt="">
    <h3 id="lb-title" style="margin-top:20px; color:#fff; font-family:'Syncopate'"></h3>
  </div>

  <script>
    // --- 1. SPOTLIGHT TEXT LOGIC ---
    // این قسمت موقعیت موس رو میگیره و به CSS متغیر میده برای افکت چراغ قوه روی متن
    const heroTitle = document.getElementById('heroTitle');
    document.addEventListener('mousemove', (e) => {
      if(!heroTitle) return;
      
      const rect = heroTitle.getBoundingClientRect();
      const x = e.clientX - rect.left; // موقعیت موس نسبت به متن
      const y = e.clientX - rect.top; // (برای افکت مورب جالبتره از X استفاده کنیم گاهی، ولی اینجا استانداردش رو میرم)
      
      // محاسبه درصد برای گرادینت
      const xPercent = (e.clientX / window.innerWidth) * 100;
      const yPercent = (e.clientY / window.innerHeight) * 100;

      // ارسال متغیر به CSS
      heroTitle.style.setProperty('--x', `${xPercent}%`);
      heroTitle.style.setProperty('--y', `${yPercent}%`);
    });

    // --- 2. ADVANCED DOTS ANIMATION (THE "COOL" PART) ---
    const canvas = document.getElementById('dotCanvas');
    const ctx = canvas.getContext('2d');
    
    let w, h;
    // آرایه برای نگهداری ذرات
    let dots = [];
    
    // موس با حالت "لیز" (Trailing)
    let mouse = { x: -100, y: -100 }; // موس واقعی
    let trail = { x: -100, y: -100 }; // رد موس (که با تاخیر میاد)

    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      initDots();
    }
    
    function initDots() {
      dots = [];
      // فاصله نقطه‌ها
      const spacing = window.innerWidth < 600 ? 25 : 35; 
      
      for(let x = 0; x < w; x += spacing) {
        for(let y = 0; y < h; y += spacing) {
          dots.push({
            x: x,
            y: y,
            baseX: x,
            baseY: y,
            size: 1.2, // اندازه پایه
            color: 'rgba(255,255,255,0.15)'
          });
        }
      }
    }

    window.addEventListener('resize', resize);
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });

    resize();

    // تابع انیمیشن اصلی
    function animate() {
      ctx.clearRect(0, 0, w, h);
      
      // فرمول فیزیک: Trail به آرامی به سمت Mouse حرکت میکنه (Linear Interpolation)
      // عدد 0.1 سرعت رسیدن هست (کمتر = نرم‌تر/کندتر)
      trail.x += (mouse.x - trail.x) * 0.1;
      trail.y += (mouse.y - trail.y) * 0.1;

      dots.forEach(dot => {
        // فاصله نقطه تا "رد موس" (نه خود موس، این باعث میشه نرم بشه)
        const dx = trail.x - dot.x;
        const dy = trail.y - dot.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        
        // شعاع تاثیر
        const maxDist = 250;
        
        // محاسبه قدرت اثر (هرچی نزدیکتر، عدد به 1 نزدیکتر)
        let strength = Math.max(0, 1 - dist/maxDist);
        
        // افکت موج: کمی جابجایی نقطه
        // (اختیاری: اگر میخوای نقطه‌ها فرار کنن اینو آنکامنت کن)
        // const forceDirectionX = dx / dist;
        // const forceDirectionY = dy / dist;
        // const force = (maxDist - dist) / maxDist;
        // if(strength > 0) {
        //   dot.x -= forceDirectionX * force * 2;
        //   dot.y -= forceDirectionY * force * 2;
        // } else {
        //   if (dot.x !== dot.baseX) dot.x -= (dot.x - dot.baseX) * 0.1;
        //   if (dot.y !== dot.baseY) dot.y -= (dot.y - dot.baseY) * 0.1;
        // }

        // رسم نقطه
        ctx.beginPath();
        // سایز نقطه: پایه + (قدرت * بزرگنمایی)
        const size = dot.size + (strength * 3.5); 
        ctx.arc(dot.x, dot.y, size, 0, Math.PI*2);
        
        // رنگ: وقتی نزدیکه سفید میشه، دور میشه محو میشه
        ctx.fillStyle = `rgba(255, 255, 255, ${0.1 + (strength * 0.6)})`;
        ctx.fill();
      });
      
      requestAnimationFrame(animate);
    }
    animate();


    // --- 3. DATA & NAVIGATION (SAME AS BEFORE) ---
    const portfolioData = [
      { type: 'painting', title: 'Abstract Fear', src: 'https://images.unsplash.com/photo-1541963463532-d68292c34b19?auto=format&fit=crop&w=600&q=80' },
      { type: 'animation', title: 'Loop 01', src: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=600&q=80' },
      { type: 'illustration', title: 'Faces', src: 'https://images.unsplash.com/photo-1579783902614-a3fb392796a5?auto=format&fit=crop&w=600&q=80' },
      { type: 'painting', title: 'Silence', src: 'https://images.unsplash.com/photo-1513364776144-60967b0f800f?auto=format&fit=crop&w=600&q=80' },
      { type: 'animation', title: 'Nightmare', src: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&w=600&q=80' },
    ];

    const wipData = [
      { title: 'Sketch 1', src: 'https://images.unsplash.com/photo-1515462277126-2dd0c162007a?auto=format&fit=crop&w=600&q=80' },
      { title: '3D Mesh', src: 'https://images.unsplash.com/photo-1614726365723-49cfae9f0294?auto=format&fit=crop&w=600&q=80' },
      { title: 'Concept', src: 'https://images.unsplash.com/photo-1586075010925-121d8e3d9d2e?auto=format&fit=crop&w=600&q=80' },
    ];

    window.onload = function() {
      renderGrid(portfolioData, 'portfolioGrid');
      renderGrid(wipData, 'wipGrid');
      showPanel('home');
    };

    function showPanel(id) {
      document.querySelectorAll('.nav-item').forEach(link => {
        link.classList.remove('active');
        if(link.getAttribute('onclick').includes(id)) link.classList.add('active');
      });
      document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      
      const body = document.body;
      if (id === 'home') {
        body.classList.remove('blur-mode');
      } else {
        body.classList.add('blur-mode');
      }
    }

    function renderGrid(data, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'grid-item';
        div.onclick = () => openLightbox(item.src, item.title);
        div.innerHTML = `
          <img src="${item.src}" alt="${item.title}">
          <div class="item-overlay">
            <h4 style="font-family:'Syncopate'; font-size:12px; color:#fff">${item.title}</h4>
            <p style="font-size:10px; margin-top:5px; color:#ccc">${item.type ? item.type : 'WIP'}</p>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function filterItems(type, btn) {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const filtered = type === 'all' ? portfolioData : portfolioData.filter(d => d.type === type);
      renderGrid(filtered, 'portfolioGrid');
    }

    function openLightbox(src, title) {
      const lb = document.getElementById('lightbox');
      lb.classList.add('active');
      document.getElementById('lb-img').src = src;
      document.getElementById('lb-title').innerText = title;
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }
  </script>
</body>
</html>
